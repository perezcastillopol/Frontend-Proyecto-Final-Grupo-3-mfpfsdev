<div class="min-vh-100 py-5 bg-light d-flex align-items-start justify-content-center">
  <div class="container" style="max-width: 900px;">
    <div class="card shadow-sm border-0 rounded-4 p-4 p-md-5">
      <div class="card-body p-0">
        <h2 class="form-title mb-2">Crear nuevo viaje</h2>
        <p class="form-subtitle mb-4">Completa los detalles de tu próxima aventura</p>

        <form [formGroup]="tripForm" (ngSubmit)="onSubmit()">
          <!-- Título -->
          <div class="mb-3">
            <label for="title" class="form-label">Título del viaje *</label>
            <input
              type="text"
              id="title"
              formControlName="title"
              class="form-control form-input"
              [class.is-invalid]="checkControl('title', 'required') || checkControl('title', 'minlength')"
              placeholder="Ej: Escapada a los Pirineos"
            />
            @if (checkControl('title', 'required')) {
              <div class="invalid-feedback d-block">El título es obligatorio</div>
            }
            @if (checkControl('title', 'minlength')) {
              <div class="invalid-feedback d-block">El título debe tener al menos 3 caracteres</div>
            }
          </div>

          <!-- Descripción -->
          <div class="mb-3">
            <label for="description" class="form-label">Descripción *</label>
            <textarea
              id="description"
              formControlName="description"
              class="form-control form-input"
              [class.is-invalid]="checkControl('description', 'required') || checkControl('description', 'minlength')"
              rows="4"
              placeholder="Describe tu viaje..."
            ></textarea>
            @if (checkControl('description', 'required')) {
              <div class="invalid-feedback d-block">La descripción es obligatoria</div>
            }
            @if (checkControl('description', 'minlength')) {
              <div class="invalid-feedback d-block">La descripción debe tener al menos 10 caracteres</div>
            }
          </div>

          <!-- Destino y Modalidad -->
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="destination" class="form-label">Destino *</label>
              <input
                type="text"
                id="destination"
                formControlName="destination"
                class="form-control form-input"
                [class.is-invalid]="checkControl('destination', 'required')"
                placeholder="Ej: Huesca, España"
              />
              @if (checkControl('destination', 'required')) {
                <div class="invalid-feedback d-block">El destino es obligatorio</div>
              }
            </div>

            <div class="col-md-6">
              <label for="modalityId" class="form-label">Modalidad *</label>
              <select
                id="modalityId"
                formControlName="modalityId"
                class="form-select form-input"
                [class.is-invalid]="checkControl('modalityId', 'required')"
              >
                <option value="">Selecciona una modalidad</option>
                @for (modality of modalities; track modality.id) {
                  <option [value]="modality.id">{{ modality.name }}</option>
                }
              </select>
              @if (checkControl('modalityId', 'required')) {
                <div class="invalid-feedback d-block">La modalidad es obligatoria</div>
              }
            </div>
          </div>

          <!-- Fechas -->
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="startDate" class="form-label">Fecha de inicio *</label>
              <input
                type="date"
                id="startDate"
                formControlName="startDate"
                class="form-control form-input"
                [class.is-invalid]="checkControl('startDate', 'required')"
              />
              @if (checkControl('startDate', 'required')) {
                <div class="invalid-feedback d-block">La fecha de inicio es obligatoria</div>
              }
            </div>

            <div class="col-md-6">
              <label for="endDate" class="form-label">Fecha de fin *</label>
              <input
                type="date"
                id="endDate"
                formControlName="endDate"
                class="form-control form-input"
                [class.is-invalid]="checkControl('endDate', 'required')"
              />
              @if (checkControl('endDate', 'required')) {
                <div class="invalid-feedback d-block">La fecha de fin es obligatoria</div>
              }
            </div>
          </div>

          <!-- Precio y Participantes -->
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="costPerPerson" class="form-label">Precio por persona (€) *</label>
              <input
                type="number"
                id="costPerPerson"
                formControlName="costPerPerson"
                class="form-control form-input"
                [class.is-invalid]="checkControl('costPerPerson', 'required') || checkControl('costPerPerson', 'min')"
                placeholder="0"
                min="0"
              />
              @if (checkControl('costPerPerson', 'required')) {
                <div class="invalid-feedback d-block">El precio es obligatorio</div>
              }
              @if (checkControl('costPerPerson', 'min')) {
                <div class="invalid-feedback d-block">El precio debe ser mayor o igual a 0</div>
              }
            </div>

            <div class="col-md-6">
              <label for="minParticipants" class="form-label">Participantes mínimos *</label>
              <input
                type="number"
                id="minParticipants"
                formControlName="minParticipants"
                class="form-control form-input"
                [class.is-invalid]="checkControl('minParticipants', 'required') || checkControl('minParticipants', 'min')"
                placeholder="1"
                min="1"
              />
              @if (checkControl('minParticipants', 'required')) {
                <div class="invalid-feedback d-block">Los participantes mínimos son obligatorios</div>
              }
              @if (checkControl('minParticipants', 'min')) {
                <div class="invalid-feedback d-block">Debe haber al menos 1 participante</div>
              }
            </div>
          </div>

          <!-- Transporte -->
          <div class="mb-3">
            <label for="transport" class="form-label">Transporte *</label>
            <input
              type="text"
              id="transport"
              formControlName="transport"
              class="form-control form-input"
              [class.is-invalid]="checkControl('transport', 'required')"
              placeholder="Ej: Coche compartido, Tren"
            />
            @if (checkControl('transport', 'required')) {
              <div class="invalid-feedback d-block">El transporte es obligatorio</div>
            }
          </div>

          <!-- Itinerario -->
          <div class="mb-4">
            <label for="itinerary" class="form-label">Itinerario (opcional)</label>
            <textarea
              id="itinerary"
              formControlName="itinerary"
              class="form-control form-input"
              rows="3"
              placeholder="Día 1: ... · Día 2: ..."
            ></textarea>
          </div>

          <!-- Form Actions -->
          <div class="d-flex flex-column-reverse flex-md-row gap-3 justify-content-md-end">
            <button type="button" class="btn btn-lg btn-cancel" (click)="onCancel()">
              Cancelar
            </button>
            <button type="submit" class="btn btn-lg btn-submit" [disabled]="!tripForm.valid">
              Crear viaje
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
